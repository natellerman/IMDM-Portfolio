<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Recipe Cards</title>
    <link rel="stylesheet" href="addNew.css">
    <!--Fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Playwrite+DK+Loopet&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;700&display=swap" rel="stylesheet">
  </head>
  
    <!--Navigation bar set up-->
    <nav class="navbar">
      <a href="index.html">Home</a>
      <a href="addNew.html">Add Recipes</a>
      <a href="saved.html">Saved Recipes</a>
      <a href="conversions.html">Conversions</a>
      <button onclick="toggleDarkMode()" class="dark-toggle">Toggle Dark Mode</button>
    </nav>
    
    <!--Forms to input recipe title and URL and to submit recipe to website-->
    <form id="NewRecipe">
      <input type="text" id="recipeTitle" placeholder="Recipe Title" required>
      <input type="url" id="recipeURL" placeholder="Paste Recipe URL" required>
      <button type="submit">Add Recipe</button>
    </form>
    
    <!--Container where recipes will appear-->
    <div id="cardGrid" class="cards-layout">
      <!-- Recipe cards will be inserted here -->
    </div>

  <script>
    // Get references to the form and the area where recipe cards will appear
    const form = document.getElementById('NewRecipe');
    const cardGrid = document.getElementById('cardGrid');

    // When the page finishes loading, load any saved recipes from localStorage
    window.addEventListener('DOMContentLoaded', loadSavedRecipes);

    // When the user submits the recipe form
    form.addEventListener('submit', function(e) {
      e.preventDefault();

    // Get the values the user entered
    const title = document.getElementById('recipeTitle').value.trim();
    const url = document.getElementById('recipeURL').value.trim();

    // If both fields are filled out
    if (title && url) {
      createCard(title, url);
      saveRecipe(title, url);
      form.reset();
    }
  });

  // Creates a new recipe card with a clickable title
  function createCard(title, url) {
    const card = document.createElement('div');
    card.className = 'recipe-card';
    card.innerHTML = `<a href="${url}" target="_blank">${title}</a>`;
    cardGrid.appendChild(card);
  }

  // Saves the recipe to localStorage
  function saveRecipe(title, url) {
    let recipes = JSON.parse(localStorage.getItem('recipes')) || [];
    recipes.push({ title, url });
    localStorage.setItem('recipes', JSON.stringify(recipes));
  }

  // Loads all saved recipes and displays them when the page loads
  function loadSavedRecipes() {
    const saved = JSON.parse(localStorage.getItem('recipes')) || [];
    saved.forEach(recipe => {
      createCard(recipe.title, recipe.url);
    });
  }
  
  // Toggle dark mode on/off and save the setting
  function toggleDarkMode() {
    document.body.classList.toggle("dark-mode");

    const mode = document.body.classList.contains("dark-mode") ? "dark" : "light";
    localStorage.setItem("mode", mode);
    }

    // Check if dark mode was previously set and apply it
    window.onload = function () {
      if (localStorage.getItem("mode") === "dark") {
      document.body.classList.add("dark-mode");
    }
  };
</script>

  </body>
</html>
